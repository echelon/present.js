<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Title</title>

		<!-- embedded styles -->
		<style type="text/css" media="all">
		</style>

		<script type="text/javascript" src="./lib/showdown.js"></script>
		<script type="text/javascript" src="./lib/jquery.js"></script>
		<script type="text/javascript" src="./lib/jquery.getUrlParam.js"></script>
		<script type="text/javascript" src="./lib/jquery.hotkeys.js"></script>
		<script type="text/javascript" src="./slidemake.js"></script>
		<script type="text/javascript"> 

			// Slideshow Global
			var SS = null;

			// From http://stackoverflow.com/questions/210717/what-is-the-best-
			// way-to-center-a-div-on-the-screen-using-jquery/210733#210733
			jQuery.fn.center = function () {
				this.css("position","absolute");
				this.css("top", ( $(window).height() - this.height() ) / 2+$(window).scrollTop() + "px");
				this.css("left", ( $(window).width() - this.width() ) / 2+$(window).scrollLeft() + "px");
				return this;
			};

			function handleLoad(data) {
				SS = slidemake3(data);

				$('.presentation').html(SS.current().toHtml());
				$('.presentation').center();	
			};

			function inject(data) {
				//var slides = slidemake(data);
				//$('.presentation').html(slides);

				var slides = slidemake2(data);
				$('.presentation').html(slides[0].toHtml());
				$('.presentation').center();


			};

			function next() {
				$('.presentation').html(SS.next().toHtml());
				$('.presentation').center();	
			};

			function prev() {
				$('.presentation').html(SS.prev().toHtml());
				$('.presentation').center();	
			};

			function loadfile() {
				var file = $(document).getUrlParam('mkd') || 'example.mkd';
				$.ajax({
						url: file,
						dataType: 'text',
						//success: function(data) { inject(data); }
						success: function(data) { handleLoad(data); }
				});
			};

			$(document).ready(function() { loadfile(); });

			$(document).bind('keydown', 'right', function() { next(); }); 
			$(document).bind('keydown', 'left', function() { prev(); }); 
			$(window).resize(function() { $('.presentation').center(); });

		</script>
	</head>
	<body>
		<div class="layout">
			<div id="controls"></div>
			<div id="currentSlide"></div>
			<div id="header"></div>
			<div id="footer"></div>
		</div>

		<div class="presentation"></div>

	</body>
</html>

